{"is_source_file": true, "format": "JavaScript", "description": "This file provides persistence services for a web-based graph visualization application using Dexie.js (IndexedDB wrapper). It implements functions for initializing the database, autosaving snapshots, restoring latest snapshots, and managing manual backups, including support for gzip decompression.", "external_files": ["dexie"], "external_methods": ["URL.createObjectURL", "URL.revokeObjectURL", "Blob", "setTimeout", "clearTimeout", "document.createElement", "console.error"], "published": ["initDB", "autosaveNow", "autosaveDebounced", "restoreLatest", "manualBackup", "manualRestore"], "classes": [], "methods": [{"name": "initDB()", "description": "Initializes the Dexie database with a 'snapshots' object store for autosave snapshots.", "scope": "", "scopeKind": ""}, {"name": "autosaveNow(design)", "description": "Creates a snapshot of the current design in the database, maintaining only the latest 10 snapshots.", "scope": "", "scopeKind": ""}, {"name": "autosaveDebounced(design, delayMs = 800)", "description": "Provides a debounced autosave wrapper to reduce database churn during frequent edits.", "scope": "", "scopeKind": ""}, {"name": "restoreLatest()", "description": "Restores the most recent snapshot from the database if available.", "scope": "", "scopeKind": ""}, {"name": "manualBackup(design)", "description": "Allows manual backup of the current design by triggering a download of a JSON file.", "scope": "", "scopeKind": ""}, {"name": "manualRestore(file)", "description": "Restores a design from a user-uploaded JSON or gzipped backup file.", "scope": "", "scopeKind": ""}], "calls": ["db.open()", "db.snapshots.add()", "db.snapshots.count()", "db.snapshots.orderBy('ts').first()", "db.snapshots.orderBy('ts').last()", "URL.createObjectURL()", "URL.revokeObjectURL()", "document.createElement('a')", "a.click()", "console.error()"], "search-terms": ["Dexie", "autosave", "backup", "restore", "IndexedDB", "persistence"], "state": 2, "file_id": 24, "knowledge_revision": 103, "git_revision": "4dcf59535324c7ba9731eeeea8f49de47535e991", "revision_history": [{"57": ""}, {"103": "4dcf59535324c7ba9731eeeea8f49de47535e991"}], "ctags": [{"_type": "tag", "name": "autosaveDebounced", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export function autosaveDebounced(design, delayMs = 800) {$/", "language": "JavaScript", "kind": "function", "signature": "(design, delayMs = 800)"}, {"_type": "tag", "name": "autosaveNow", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function autosaveNow(design) {$/", "language": "JavaScript", "kind": "function", "signature": "(design)"}, {"_type": "tag", "name": "autosaveTimer", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^let autosaveTimer = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^let db;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "initDB", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export function initDB() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "manualBackup", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function manualBackup(design) {$/", "language": "JavaScript", "kind": "function", "signature": "(design)"}, {"_type": "tag", "name": "manualRestore", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function manualRestore(file) {$/", "language": "JavaScript", "kind": "function", "signature": "(file)"}, {"_type": "tag", "name": "restoreLatest", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function restoreLatest() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "ed14e4058a18d6eb008caea50d71b0a0", "format-version": 4, "code-base-name": "WebApplicationContainer", "filename": "WebApplicationContainer/src/services/persistence.js", "fields": [{"name": "let autosaveTimer = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let db;", "scope": "", "scopeKind": "", "description": "unavailable"}]}