{"is_source_file": true, "format": "JavaScript", "description": "This source file provides functions for persistent storage related to graph designs, using IndexedDB via the Dexie library. It includes features for autosaving, debouncing saves, restoring the latest snapshot, and manual backup/restore operations.", "external_files": ["dexie"], "external_methods": ["clearTimeout", "setTimeout", "URL.createObjectURL", "URL.revokeObjectURL"], "published": ["__testOnly_clearAutosaveTimer", "initDB", "autosaveNow", "autosaveDebounced", "restoreLatest", "manualBackup", "manualRestore"], "classes": [], "methods": [{"name": "__testOnly_clearAutosaveTimer()", "description": "Clears the pending autosave timer; used primarily in testing cleanup.", "scope": "", "scopeKind": ""}, {"name": "initDB()", "description": "Initializes the Dexie database with a 'snapshots' store for autosave snapshots.", "scope": "", "scopeKind": ""}, {"name": "autosaveNow(design)", "description": "Creates a new snapshot of current design data, maintaining only the 10 most recent snapshots.", "scope": "", "scopeKind": ""}, {"name": "autosaveDebounced(design, delayMs = 800)", "description": "Wraps autosave in a debounce, delaying the save to reduce database operations during rapid edits.", "scope": "", "scopeKind": ""}, {"name": "restoreLatest()", "description": "Retrieves the most recent snapshot data, if available.", "scope": "", "scopeKind": ""}, {"name": "manualBackup(design)", "description": "Exports the current design as a JSON file for manual backup.", "scope": "", "scopeKind": ""}, {"name": "manualRestore(file)", "description": "Restores design data from a user-selected JSON or gzipped backup file.", "scope": "", "scopeKind": ""}], "calls": ["clearTimeout", "setTimeout", "db.open", "db.snapshots.add", "db.snapshots.count", "db.snapshots.orderBy", "db.snapshots.delete", "db.snapshots.last", "document.createElement", "URL.createObjectURL", "URL.revokeObjectURL", "file.arrayBuffer", "Response", "Blob", "JSON.parse", "console.error", "setTimeout"], "search-terms": ["persistence", "autosave", "Dexie", "IndexedDB", "snapshot", "backup", "restore"], "state": 2, "file_id": 24, "knowledge_revision": 222, "git_revision": "e971243f235d8c018fc7bb2a8f571f6e93026a43", "revision_history": [{"57": ""}, {"103": "4dcf59535324c7ba9731eeeea8f49de47535e991"}, {"220": "2c439dca4fbd924fb6793e0e86ec9276d1480a39"}, {"222": "e971243f235d8c018fc7bb2a8f571f6e93026a43"}], "ctags": [{"_type": "tag", "name": "__testOnly_clearAutosaveTimer", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export function __testOnly_clearAutosaveTimer() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "autosaveDebounced", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export function autosaveDebounced(design, delayMs = 800) {$/", "language": "JavaScript", "kind": "function", "signature": "(design, delayMs = 800)"}, {"_type": "tag", "name": "autosaveNow", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function autosaveNow(design) {$/", "language": "JavaScript", "kind": "function", "signature": "(design)"}, {"_type": "tag", "name": "autosaveTimer", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^let autosaveTimer = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^let db;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "initDB", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export function initDB() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "manualBackup", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function manualBackup(design) {$/", "language": "JavaScript", "kind": "function", "signature": "(design)"}, {"_type": "tag", "name": "manualRestore", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function manualRestore(file) {$/", "language": "JavaScript", "kind": "function", "signature": "(file)"}, {"_type": "tag", "name": "restoreLatest", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function restoreLatest() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "e409f519a305e328fa729babd5d70821", "format-version": 4, "code-base-name": "WebApplicationContainer", "filename": "WebApplicationContainer/src/services/persistence.js", "fields": [{"name": "let autosaveTimer = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let db;", "scope": "", "scopeKind": "", "description": "unavailable"}]}