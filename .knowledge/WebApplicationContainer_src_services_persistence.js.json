{"is_source_file": true, "format": "JavaScript", "description": "This file provides persistence-related functions for a graph visualization application, including database initialization, autosave, manual backup, and restore functionality using Dexie.js and IndexedDB.", "external_files": ["dexie"], "external_methods": [], "published": ["initDB", "autosaveNow", "autosaveDebounced", "restoreLatest", "manualBackup", "manualRestore"], "classes": [], "methods": [{"name": "initDB()", "description": "Initializes the IndexedDB database using Dexie with a store for snapshots.", "scope": "", "scopeKind": ""}, {"name": "autosaveNow(design)", "description": "Inserts a new snapshot of the current design into the database, maintaining only the latest 10 snapshots.", "scope": "", "scopeKind": ""}, {"name": "autosaveDebounced(design, delayMs = 800)", "description": "Provides a debounced wrapper for autosaving, reducing frequency of database writes during editing.", "scope": "", "scopeKind": ""}, {"name": "restoreLatest()", "description": "Restores the most recent snapshot from the database.", "scope": "", "scopeKind": ""}, {"name": "manualBackup(design)", "description": "Creates a JSON backup of the current design and triggers a download.", "scope": "", "scopeKind": ""}, {"name": "manualRestore(file)", "description": "Reconstructs a design object from a user-selected JSON or gzip backup file.", "scope": "", "scopeKind": ""}, {"name": "__testOnly_clearAutosaveTimer()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["db.open", "db.snapshots.add", "db.snapshots.count", "db.snapshots.orderBy", "db.snapshots.delete", "db.snapshots.last", "JSON.stringify", "URL.createObjectURL", "document.createElement", "a.click", "URL.revokeObjectURL", "file.arrayBuffer", "new Response", "new Blob", "DecompressionStream", "TextDecoder", "JSON.parse"], "search-terms": ["Dexie", "autosave", "snapshots", "IndexedDB", "backup", "restore", "graph editor", "persistence"], "state": 2, "file_id": 24, "knowledge_revision": 220, "git_revision": "2c439dca4fbd924fb6793e0e86ec9276d1480a39", "revision_history": [{"57": ""}, {"103": "4dcf59535324c7ba9731eeeea8f49de47535e991"}, {"220": "2c439dca4fbd924fb6793e0e86ec9276d1480a39"}], "ctags": [{"_type": "tag", "name": "__testOnly_clearAutosaveTimer", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export function __testOnly_clearAutosaveTimer() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "autosaveDebounced", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export function autosaveDebounced(design, delayMs = 800) {$/", "language": "JavaScript", "kind": "function", "signature": "(design, delayMs = 800)"}, {"_type": "tag", "name": "autosaveNow", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function autosaveNow(design) {$/", "language": "JavaScript", "kind": "function", "signature": "(design)"}, {"_type": "tag", "name": "autosaveTimer", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^let autosaveTimer = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^let db;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "initDB", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export function initDB() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "manualBackup", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function manualBackup(design) {$/", "language": "JavaScript", "kind": "function", "signature": "(design)"}, {"_type": "tag", "name": "manualRestore", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function manualRestore(file) {$/", "language": "JavaScript", "kind": "function", "signature": "(file)"}, {"_type": "tag", "name": "restoreLatest", "path": "/home/kavia/workspace/code-generation/graph-visualization-software-7354-8699/WebApplicationContainer/src/services/persistence.js", "pattern": "/^export async function restoreLatest() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "e409f519a305e328fa729babd5d70821", "format-version": 4, "code-base-name": "WebApplicationContainer", "filename": "WebApplicationContainer/src/services/persistence.js", "fields": [{"name": "let autosaveTimer = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let db;", "scope": "", "scopeKind": "", "description": "unavailable"}]}